window.addEventListener('DOMContentLoaded', () => {
	const menu = document.querySelector('.header-wrap__contacts'),
	/*menuItem = document.querySelectorAll('.menu__list-item'),*/
	hamburger = document.querySelector('.hamburger');

	hamburger.addEventListener('click', () => {
			hamburger.classList.toggle('active');
			menu.classList.toggle('active');
	});

});




$(document).ready(function() {

	/*Аккордеон*/
	$(".question__item").click(function() {
		$this = $(this),
		$this.hasClass("question__item-opened") ? ($this.removeClass("question__item-opened"),
		$this.find(".question__item-body").slideUp()) : ($this.addClass("question__item-opened"),
		$this.find(".question__item-body").slideDown())
	});

	/*Галерея картинок fancybox*/

	$(".gallery-main__thumb-wrap").fancybox({
    fixed : false,
    autoCenter : true
	});

	/*Анимация wow*/
	$(".about__wrap, .info-block__set, .lessons__text, .lessons__wrap, .gallery-main__wrap, .accordion").addClass("wow");




	/*Модальное окно*/

	$('[data-modal=consultation]').on("click", function(){
		$('.overlay, #consultation').fadeIn('slow');
	});

	$('.modal__close').on('click', function(){
			$('.overlay, #consultation, #thanks').fadeOut('slow');
	});

	$("#consultation-form").validate({
		rules: {
			name: {
				required: true,
				minlength: 2
			},
			email: {
				required: true,
				email: true,
			}
		},
		messages: {
			messageage: {
				required: "Пожалуйста, введите возраст ученика",
			},
			name: {
				required: "Пожалуйста, введите свое имя",
				minlength: jQuery.validator.format("Введите минимум 3 символа!")
			},
			email: {
				required: "Пожалуйста, введите свою почту",
				email: "Неправильно введен почтовый адрес"
			}
		},
    submitHandler: function(form) {
      
      const TOKEN = '1968477113:AAGkA1hAn4oaQqKDnVnz80puHjb9pqAhlSY';
      const CHAT_ID = '-1001244032999';
     
      var url = 'https://api.telegram.org/bot' + TOKEN + '/sendMessage'; // токен бота
      var formData = new FormData(form);
      
      var body = JSON.stringify({
        chat_id: CHAT_ID,
        parse_mode: 'Markdown',
        text: '*Заявка с сайта*\n' + '\n\n*Имя:* ' + data.get("name") + '\n*E-mail:* ' + data.get("email")
      });
	    
      $.ajax({
        url: url,
        method: 'POST',
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: body,
        complete: function() {
          form.reset();
          var overlayEl = form.closest('.overlay');
          $('#consultation').hide();
          $('#thanks').show();
        }
      });
    }
	}); 



	
	$("#form-qu").validate({
		rules: {
			messageage: {
				required: true
			},
			name: {
				required: true,
				minlength: 2
			},
			email: {
				required: true,
				email: true,
			}
		},
		messages: {
			messageage: {
				required: "Пожалуйста, введите возраст ученика",
			},
			name: {
				required: "Пожалуйста, введите свое имя",
				minlength: jQuery.validator.format("Введите минимум 3 символа!")
			},
			email: {
				required: "Пожалуйста, введите свою почту",
				email: "Неправильно введен почтовый адрес"
			}
		},
    submitHandler: function(form) {
      
      const TOKEN = ''; // '1968477113:AAGkA1hAn4oaQqKDnVnz80puHjb9pqAhlSY';
      const CHAT_ID = '-1001244032999';
     
      var url = 'https://api.telegram.org/bot' + TOKEN + '/sendMessage'; // токен бота
      var formData = new FormData(form);
      
      var body = JSON.stringify({
        chat_id: CHAT_ID,
        parse_mode: 'Markdown',
        text: '*Заявка с сайта*\n' + '\n\n*Имя:* ' + data.get("name") + '\n*E-mail:* ' + data.get("email") + '\n*Взрослый/ребенок:* ' + data.get("radio1") + '\n*Возраст:* ' + data.get("messageage") + '\n*Стиль:* ' + data.get("radio2") + '\n*Уровень знаний:* ' + data.get("radio3") + '\n*Комментарий:* ' + data.get("message")
      });
	    
      $.ajax({
        url: url,
        method: 'POST',
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: body,
        complete: function() {
          form.reset();
          $('.overlay, #thanks').fadeIn('slow');
        }
      });
    }
	});

});

